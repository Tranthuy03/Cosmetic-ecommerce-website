@using HairCareStore.ViewModels
@model DashboardViewModel

@{
    Layout = "_AdminLayout";
}
@section Styles {
    <link rel="stylesheet" href="~/css/dashboard.css" />
}
<div class="container">

    <!-- row -->
    <div class="row tm-content-row">
        <!-- KPI Cards Row -->
        <div class="col-12  kpi-row">
            <div class="row mb-4">

                <!-- Total Revenue -->
                <div class="col-sm-12 col-md-6 col-lg-3">
                    <div class="tm-bg-primary-dark tm-block text-center">
                        <i class="fas fa-dollar-sign fa-2x mb-2"></i>
                        <h3 class="tm-block-title">Total Revenue</h3>
                        <h2>@Model.TotalRevenue.ToString("N0") USD</h2>
                        <p class="tm-small">Today </p>
                    </div>
                </div>

                <!-- Total Orders -->
                <div class="col-sm-12 col-md-6 col-lg-3">
                    <div class="tm-bg-primary-dark tm-block text-center">
                        <i class="fas fa-shopping-bag fa-2x mb-2"></i>
                        <h3 class="tm-block-title">Orders</h3>
                        <h2>@Model.TotalOrders</h2>
                        <p class="tm-small">Today</p>
                    </div>
                </div>

                <!-- Total Customers -->
                <div class="col-sm-12 col-md-6 col-lg-3">
                    <div class="tm-bg-primary-dark tm-block text-center">
                        <i class="fas fa-users fa-2x mb-2"></i>
                        <h3 class="tm-block-title">Customers</h3>
                        <h2>@Model.TotalCustomers</h2>
                        <p class="tm-small">Since launch</p>
                    </div>
                </div>

                <!-- Total Products -->
                <div class="col-sm-12 col-md-6 col-lg-3">
                    <div class="tm-bg-primary-dark tm-block text-center">
                        <i class="fas fa-box-open fa-2x mb-2"></i>
                        <h3 class="tm-block-title">Products</h3>
                        <h2>@Model.TotalProducts</h2>
                        <p class="tm-small">Active</p>
                    </div>
                </div>

            </div>
        </div>

        <div class="col-sm-12 col-md-12 col-lg-6 col-xl-6 tm-block-col">
            <div class="tm-bg-primary-dark tm-block">
                <h2 class="tm-block-title">Monthly Revenue</h2>
                <canvas id="lineChart"></canvas>
            </div>
        </div>
        <div class="col-sm-12 col-md-12 col-lg-6 col-xl-6 tm-block-col">
            <div class="tm-bg-primary-dark tm-block">
                <h2 class="tm-block-title">Top Selling Products</h2>
                <canvas id="barChart"></canvas>
            </div>
        </div>
        <div class="col-sm-12 col-md-12 col-lg-6 col-xl-6 tm-block-col">
            <div class="tm-bg-primary-dark tm-block tm-block-taller">
                <h2 class="tm-block-title">Inventory Status</h2>
                <div id="pieChartContainer">
                    <canvas id="pieChart" class="chartjs-render-monitor" width="200" height="200"></canvas>
                </div>
            </div>
        </div>
        <div class="col-sm-12 col-md-12 col-lg-6 col-xl-6 tm-block-col">
            <div class="tm-bg-primary-dark tm-block tm-block-taller tm-block-overflow">
                <h2 class="tm-block-title">Notification List</h2>
                <div class="tm-notification-items">

                    <div class="media tm-notification-item">
                        <div class="tm-gray-circle">
                            <img src="~/img/notification-01.jpg" alt="Avatar Image" class="rounded-circle">
                        </div>
                        <div class="media-body">
                            <p class="mb-2"><b>Jessica Lee</b> has placed a new order.</p>
                            <span class="tm-small tm-text-color-secondary">6h ago</span>
                        </div>
                    </div>

                    <div class="media tm-notification-item">
                        <div class="tm-gray-circle">
                            <img src="~/img/notification-02.jpg" alt="Avatar Image" class="rounded-circle">
                        </div>
                        <div class="media-body">
                            <p class="mb-2"><b>Oliver Smith</b> has cancelled an order.</p>
                            <span class="tm-small tm-text-color-secondary">6h ago</span>
                        </div>
                    </div>

                    <div class="media tm-notification-item">
                        <div class="tm-gray-circle">
                            <img src="~/img/notification-03.jpg" alt="Avatar Image" class="rounded-circle">
                        </div>
                        <div class="media-body">
                            <p class="mb-2"><b>Emily Brown</b> has placed a new order.</p>
                            <span class="tm-small tm-text-color-secondary">6h ago</span>
                        </div>
                    </div>

                    <div class="media tm-notification-item">
                        <div class="tm-gray-circle">
                            <img src="~/img/notification-01.jpg" alt="Avatar Image" class="rounded-circle">
                        </div>
                        <div class="media-body">
                            <p class="mb-2"><b>Laura Cute</b> has cancelled an order.</p>
                            <span class="tm-small tm-text-color-secondary">6h ago</span>
                        </div>
                    </div>

                    <div class="media tm-notification-item">
                        <div class="tm-gray-circle">
                            <img src="~/img/notification-02.jpg" alt="Avatar Image" class="rounded-circle">
                        </div>
                        <div class="media-body">
                            <p class="mb-2"><b>Samantha</b> has placed a new order.</p>
                            <span class="tm-small tm-text-color-secondary">6h ago</span>
                        </div>
                    </div>

                    <div class="media tm-notification-item">
                        <div class="tm-gray-circle">
                            <img src="~/img/notification-03.jpg" alt="Avatar Image" class="rounded-circle">
                        </div>
                        <div class="media-body">
                            <p class="mb-2"><b>Sophie</b> has cancelled an order.</p>
                            <span class="tm-small tm-text-color-secondary">6h ago</span>
                        </div>
                    </div>

                </div>

            </div>
        </div>
        <div class="col-12 tm-block-col">
            <div class="tm-bg-primary-dark tm-block tm-block-taller tm-block-overflow">
                <h2 class="tm-block-title">Orders List</h2>
                <div class="tm-orders-scroll">
                    <table class="table">
                        <thead>
                            <tr>
                                <th scope="col">ORDER NO</th>
                                <th scope="col">CUSTOMER</th>
                                <th scope="col">DATE</th>
                                <th scope="col">ITEMS</th>
                                <th scope="col">TOTAL</th>
                                <th scope="col">PAYMENT</th>
                                <th scope="col">STATUS</th>
                            </tr>
                        </thead>
                        <tbody>
                        
                                @foreach (var o in Model.RecentOrders)
                                {
                                <tr>
                                    <td>#OD @o.OrderId</td>
                                    <td>@o.User?.Fullname</td>
                                    <td>@o.Date?.ToString("dd/MM/yyyy")</td>
                                    <td>@o.OrderDetails.Count</td>
                                    <td>@o.TotalAmount.ToString("N0") VND</td>
                                    <td>COD</td>
                                    <td>
                                        <div class="tm-status-circle @o.Status?.ToLower()"></div>
                                            @o.Status
                                    </td>
                                </tr>
                                }
                        
                            
                        </tbody>

                    </table>
                </div>
            </div>
        </div>
    </div>

</div>

<script src="~/js/jquery-3.3.1.min.js"></script>
<!-- https://jquery.com/download/ -->
<script src="~/js/moment.min.js"></script>
<!-- https://momentjs.com/ -->
<script src="~/js/Chart.min.js"></script>


<!-- https://getbootstrap.com/ -->
<script src="~/js/tooplate-scripts.js"></script>
<script>
    Chart.defaults.global.defaultFontColor = '#000';
    let ctxLine,
        ctxBar,
        ctxPie,
        optionsLine,
        optionsBar,
        optionsPie,
        configLine,
        configBar,
        configPie,
        lineChart;
    barChart, pieChart;
    // DOM is ready
    $(function () {
        drawLineChart(); // Line Chart
        drawBarChart(); // Bar Chart
        drawPieChart(); // Pie Chart

        $(window).resize(function () {
            updateLineChart();
            updateBarChart();
        });
    })
</script>